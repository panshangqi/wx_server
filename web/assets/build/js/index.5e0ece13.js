!function(e){function t(t){for(var n,u,r=t[0],s=t[1],o=t[2],d=0,f=[];d<r.length;d++)u=r[d],l[u]&&f.push(l[u][0]),l[u]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);f.length;)f.shift()();return i.push.apply(i,o||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,r=1;r<a.length;r++){var s=a[r];0!==l[s]&&(n=!1)}n&&(i.splice(t--,1),e=u(u.s=a[0]))}return e}var n={},l={2:0},i=[];function u(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,u),a.l=!0,a.exports}u.m=e,u.c=n,u.d=function(e,t,a){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(u.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(a,n,function(t){return e[t]}.bind(null,n));return a},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="../";var r=window.webpackJsonp=window.webpackJsonp||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var o=0;o<r.length;o++)t(r[o]);var c=s;i.push([706,0]),a()}({53:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(112)),l=o(a(107)),i=o(a(219)),u=o(a(293)),r=o(a(136));a(108),a(124);var s=o(a(0));function o(e){return e&&e.__esModule?e:{default:e}}a(294);var c=r.default.confirm,d={};function f(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],l=arguments[4],i=(new Date).getTime(),o=a,c=t,f={method:e,credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",Accept:"application/json; charset=utf-8"}};o.t=i;var m=d.cookies.get_cookies();(f.headers.token=m&&m.token||"",f.headers.username=m&&m.username||"","post"==e||"put"==e)?f.body=(0,u.default)(o):c=t+"?"+function(e){var t="";for(var a in e)""!=t&&(t+="&"),t+=a+"="+e[a];return t}(o);fetch(c,f).then(function(e){var t=e.status,a=[];if(t>=200&&t<300)return e;400===t||500===t?a.push("我们正在努力解决问题"):401===t?a.push("您尚未登录"):403===t?a.push("你无权限访问"):404===t?a.push("未发现所请求的资源"):403===t?a.push("没有权限或访问的资源不属于此账号"):502===t&&a.push("服务正在升级，请稍后重试！"),"function"==typeof l&&l(t),a.push("("+e.statusText+")");var n=new Error;throw n.name=t,n.message=a.join("\n"),n.res=e,n}).then(function(e){return e.json()}).then(function(e){var t,a;"AJAX"==e.type?n(e):(t=e.code,a=e.message,r.default.error({title:t,content:s.default.createElement("div",null,s.default.createElement("p",null,a)),onOk:function(){401===t&&(window.location.href=d.util.make_route("/login"))}}))}).catch(function(e){console.log(e),"function"==typeof l&&l(500),console.log(e.message)})}d.http={get:function(e,t,a,n){return f("get",e,t,a,n)},post:function(e,t,a,n){return f("post",e,t,a,n)},put:function(e,t,a,n){return f("put",e,t,a,n)},_delete:function(e,t,a,n){return f("delete",e,t,a,n)},getSync:function(e,t){return new i.default(function(a,n){d.http.get(e,t,function(e){a(e)},function(e){throw new Error("Http Error Code: "+e)})}).catch(function(e){console.log(e)})},postSync:function(e,t){return new i.default(function(a,n){d.http.post(e,t,function(e){a(e)},function(e){throw new Error("Http Error Code: "+e)})}).catch(function(e){console.log(e)})}},d.util={dataFormat:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)},make_route:function(e){return"/"==e[0]&&(e=e.substr(1)),"http://"+window.location.host+"/"+e},make_url:function(e){return"/api"+e},make_client_url:function(e){return"/client"+e},get_url_params:function(e){if(!e)return{};var t=e.indexOf("?"),a=e;t>-1&&(a=e.substring(t+1,e.length));var n=a.split("&"),i={},u=!0,r=!1,s=void 0;try{for(var o,c=(0,l.default)(n);!(u=(o=c.next()).done);u=!0){var d=o.value.split("=");i[d[0]]=d[1]}}catch(e){r=!0,s=e}finally{try{!u&&c.return&&c.return()}finally{if(r)throw s}}return i},sleep:function(e){return new i.default(function(t,a){setTimeout(function(){t(e)},e)})},get_file_suffix:function(e){return e.substring(e.lastIndexOf(".")+1)},loading:function(e,t){e?(n.default.config({top:250,content:"",duration:20}),n.default.loading(t)):n.default.destroy()},confirmDialog:function(e,t){return new i.default(function(a,n){c({title:e,content:t,onOk:function(){a(!0)},onCancel:function(){a(!1)}})})},toDataUrl:function(e,t){return new i.default(function(a,n){var l=new XMLHttpRequest;l.onload=function(){var e=new FileReader;e.onloadend=function(){"function"==typeof t&&t(e.result),a(e.result)},e.readAsDataURL(l.response)},l.open("GET",e),l.responseType="blob",l.send()})}},d.cookies={set_cookies:function(e){localStorage.setItem("wx_server_auth",(0,u.default)(e))},get_cookies:function(){var e=localStorage.getItem("wx_server_auth");return e?JSON.parse(e):null},del_cookies:function(){window.localStorage.removeItem("wx_server_auth")}},t.default=d},706:function(e,t,a){e.exports=a(707)},707:function(e,t,a){"use strict";var n=E(a(6)),l=E(a(67)),i=E(a(62)),u=E(a(8)),r=E(a(15)),s=E(a(7)),o=E(a(10));a(234);var c=E(a(0)),d=E(a(5)),f=a(172),m=a(40);a(878),a(893);var h=E(a(708)),p=E(a(718)),v=E(a(719)),g=E(a(722)),_=E(a(723)),y=E(a(726)),k=E(a(727)),b=E(a(53));function E(e){return e&&e.__esModule?e:{default:e}}var x=(0,m.createBrowserHistory)();document.onreadystatechange=function(){console.log(document.readyState),document.readyState};var w=function(e){function t(){(0,u.default)(this,t);var e=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.state={},e}return(0,o.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){console.log("init auth routeex")}},{key:"PrivateRoute",value:function(e){var t=e.component,a=(0,l.default)(e,["component"]);return null!==b.default.cookies.get_cookies()?c.default.createElement(f.Route,(0,n.default)({},a,{render:function(e){return c.default.createElement(t,e)}})):c.default.createElement("div",null,"登录失效, 请重新登录 ",c.default.createElement(f.Link,{to:"/login"},"去登录"))}},{key:"render",value:function(){return c.default.createElement(f.Router,{history:x},c.default.createElement(k.default,null,c.default.createElement(f.Switch,null,c.default.createElement(f.Route,{exact:!0,path:"/login",component:h.default}),c.default.createElement(this.PrivateRoute,{exact:!0,path:"/home",component:p.default}),c.default.createElement(this.PrivateRoute,{exact:!0,path:"/create_class",component:_.default}),c.default.createElement(this.PrivateRoute,{exact:!0,path:"/sections",component:g.default}),c.default.createElement(this.PrivateRoute,{exact:!0,path:"/edit_class",component:v.default}),c.default.createElement(this.PrivateRoute,{exact:!0,path:"/svg_scss",component:y.default}),c.default.createElement(f.Redirect,{to:"/home"}))))}}]),t}(c.default.Component);d.default.render(c.default.createElement(w,null),document.getElementById("root"))},708:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(38)),l=v(a(137)),i=v(a(110)),u=v(a(111)),r=v(a(62)),s=v(a(8)),o=v(a(15)),c=v(a(7)),d=v(a(10)),f=v(a(136));a(96),a(133),a(124);var m=a(0),h=v(m),p=v(a(53));function v(e){return e&&e.__esModule?e:{default:e}}a(897);var g=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return e.state={visible:!1,username:"",password:""},e}return(0,d.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.checkLogin()}},{key:"checkLogin",value:function(){var e=(0,u.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.http.getSync("/client/check/login/status");case 2:t=e.sent,console.log("login status",t),t&&"AJAX"==t.type&&"success"==t.body.status&&this.props.history.push("/home");case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"login",value:function(){var e=(0,u.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.http.postSync("/client/login",{username:this.state.username,password:this.state.password});case 2:if(t=e.sent,console.log(t),!t||"AJAX"!=t.type||"yes"!=t.body.success){e.next=10;break}return p.default.cookies.set_cookies({token:t.body.token,username:t.body.username}),this.props.history.push("/home"),e.abrupt("return");case 10:a="登录失败，请检查账号密码是否正确",f.default.error({title:"提示",content:a,width:500,onOk:function(){}});case 11:case"end":return e.stop()}var a},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return h.default.createElement("div",{id:"login_html"},h.default.createElement("div",{className:"main_logo"}),h.default.createElement("div",{className:"title"},"长青微信小程序中台配置系统"),h.default.createElement("div",{className:"input_info"},h.default.createElement(l.default,{placeholder:"请输入账号",value:this.state.username,onChange:function(t){e.setState({username:t.target.value})}})),h.default.createElement("div",{className:"input_info"},h.default.createElement(l.default.Password,{placeholder:"请输入密码",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}})),h.default.createElement("div",{className:"input_info"},h.default.createElement(n.default,{className:"login_btn",type:"primary",onClick:this.login.bind(this),style:{width:"100%"}},"登 录")))}}]),t}(m.Component);t.default=g},718:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(136)),l=y(a(137)),i=y(a(107)),u=y(a(38)),r=y(a(12)),s=y(a(112)),o=y(a(110)),c=y(a(111)),d=y(a(62)),f=y(a(8)),m=y(a(15)),h=y(a(7)),p=y(a(10));a(124),a(133),a(96),a(134),a(108);var v=a(0),g=y(v),_=y(a(53));function y(e){return e&&e.__esModule?e:{default:e}}a(901);var k=function(e){function t(e){(0,f.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.state={visible:!1,name:"",classes:[]},a}return(0,p.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.get_classes()}},{key:"componentWillUnmount",value:function(){}},{key:"get_classes",value:function(){var e=(0,c.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.default.http.getSync(_.default.util.make_url("/get_classes"),{class_id:-1});case 2:t=e.sent,console.log(t,"=============="),t.body.sort(function(e,t){return t.create_time-e.create_time}),this.setState({classes:t.body});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onCreateClick",value:function(){this.props.history.push("/create_class")}},{key:"createPost",value:function(){var e=(0,c.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.name){e.next=3;break}return s.default.warning("名字不能为空"),e.abrupt("return");case 3:return this.setState({visible:!1}),e.next=6,_.default.http.postSync(_.default.util.make_url("/create_class"),{name:this.state.name});case 6:return t=e.sent,console.log(t),e.next=10,this.get_classes();case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"deletePost",value:function(){var e=(0,c.default)(o.default.mark(function e(t){var a,n,l;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t._id,n=t.name,!t.section_count){e.next=5;break}return s.default.warning("请先删除章节内容"),e.abrupt("return");case 5:return e.next=7,_.default.util.confirmDialog("提示","确定删除【"+n+"】？");case 7:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,_.default.http.postSync(_.default.util.make_url("/delete_class"),{class_id:a});case 12:l=e.sent,console.log(l),this.get_classes();case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onNameChange",value:function(e){console.log(e.target.value),this.setState({name:e.target.value})}},{key:"render_class_list",value:function(){var e=this,t=[],a=function(a){var n=a._id,l=_.default.util.dataFormat(a.create_time);t.push(g.default.createElement("div",{className:"item_box",key:n},g.default.createElement("div",{className:"left"},g.default.createElement("div",{className:"title"},a.title,g.default.createElement("span",{className:"sub_title"},"(",a.sub_title,")")),g.default.createElement("div",{className:"introduction"},g.default.createElement("span",null,"课程简介："),a.introduction),g.default.createElement("span",{className:"info"},g.default.createElement("span",null,"id:")," ",n),g.default.createElement("span",{className:"info"},g.default.createElement("span",null,"创建时间:")," ",l)),g.default.createElement("div",{className:"right"},g.default.createElement(u.default,{type:"primary",onClick:function(){console.log(a.id),e.props.history.push("/sections?id="+n+"&name="+a.name)}},"编辑章节",g.default.createElement(r.default,{type:"form"})),g.default.createElement(u.default,{type:"primary",className:"modify",onClick:function(){console.log(a.id),e.props.history.push("/create_class?id="+n+"&name="+a.name)}},"修改课程",g.default.createElement(r.default,{type:"edit"})),g.default.createElement(u.default,{type:"danger",className:"delete",onClick:function(){e.deletePost(a)}},"删除",g.default.createElement(r.default,{type:"delete"})))))},n=!0,l=!1,s=void 0;try{for(var o,c=(0,i.default)(this.state.classes);!(n=(o=c.next()).done);n=!0){a(o.value)}}catch(e){l=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(l)throw s}}return t}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:"home_html"},g.default.createElement("div",{className:"base_page_head"},g.default.createElement(u.default,{type:"primary",onClick:this.onCreateClick.bind(this)},g.default.createElement(r.default,{type:"plus"}),"创建新套课")),this.render_class_list(),g.default.createElement(n.default,{title:"创建",visible:this.state.visible,okText:"确认",cancelText:"取消",okButtonProps:{disabled:!1},onOk:function(){e.createPost()},onCancel:function(){e.setState({visible:!1})}},"套课名称：",g.default.createElement(l.default,{style:{width:300},value:this.state.name,onChange:this.onNameChange.bind(this)})))}}]),t}(v.Component);t.default=k},719:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=b(a(38)),l=b(a(12)),i=b(a(112)),u=b(a(110)),r=b(a(107)),s=b(a(111)),o=b(a(62)),c=b(a(8)),d=b(a(15)),f=b(a(7)),m=b(a(10)),h=b(a(137));a(96),a(134),a(108),a(133);var p=a(0),v=b(p),g=b(a(53)),_=b(a(135));a(903);var y=b(a(720)),k=b(a(721));function b(e){return e&&e.__esModule?e:{default:e}}h.default.TextArea;var E=function(e){function t(e){(0,c.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return console.log(window.location.search),a.search=g.default.util.get_url_params(decodeURIComponent(window.location.search)),console.log(a.search),a.cls_id=a.search.id,a.cls_name=a.search.name,a.state={content:[],title:"",author:"",music:{audio:"",extension:"",duration:0},visible:!1,section_info:null},a}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.action="create",this.search.section_id&&"modify"==this.search.type&&(this.action="modify",this.init())}},{key:"componentWillUnmount",value:function(){}},{key:"init",value:function(){var e=(0,s.default)(u.default.mark(function e(){var t,a,n,l,i,s,o,c,d,f,m=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.default.http.getSync(g.default.util.make_url("/get_sections"),{class_id:this.cls_id,section_id:this.search.section_id});case 2:t=e.sent,console.log(t),a=t.body,n=a.music.audio,g.default.util.toDataUrl(n,function(e){m.setState({music:{audio:e,extension:a.music.extension}})}),l=!0,i=!1,s=void 0,e.prev=10,o=(0,r.default)(a.content);case 12:if(l=(c=o.next()).done){e.next=22;break}if(!("image"in(d=c.value))){e.next=19;break}return e.next=17,g.default.util.toDataUrl(d.image);case 17:f=e.sent,d.image=f;case 19:l=!0,e.next=12;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(10),i=!0,s=e.t0;case 28:e.prev=28,e.prev=29,!l&&o.return&&o.return();case 31:if(e.prev=31,!i){e.next=34;break}throw s;case 34:return e.finish(31);case 35:return e.finish(28);case 36:console.log(a),this.setState({section_info:a,title:a.title,author:a.author,content:a.content});case 38:case"end":return e.stop()}},e,this,[[10,24,28,36],[29,,31,35]])}));return function(){return e.apply(this,arguments)}}()},{key:"onSubmitClick",value:function(){var e=(0,s.default)(u.default.mark(function e(){var t,a,n,l,s,o,c,d,f,m,h,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.title){e.next=3;break}return i.default.warning("标题不能为空"),e.abrupt("return");case 3:if(this.state.music.extension){e.next=6;break}return i.default.warning("音乐未选择"),e.abrupt("return");case 6:if(this.state.music.duration){e.next=9;break}return i.default.warning("正在计算音乐时长"),e.abrupt("return");case 9:if(this.state.author){e.next=12;break}return i.default.warning("作者不能为空"),e.abrupt("return");case 12:g.default.util.loading(!0,"正在发送"),t=this.state.title,a=this.state.author,n=this.state.music,l=this.state.content,s=!0,o=!1,c=void 0,e.prev=20,d=(0,r.default)(l);case 22:if(s=(f=d.next()).done){e.next=37;break}if(!("text"in(m=f.value))){e.next=30;break}if(m.text){e.next=28;break}return i.default.warning("段落不能为空"),e.abrupt("return");case 28:e.next=34;break;case 30:if(!("image"in m)){e.next=34;break}if(m.extension){e.next=34;break}return i.default.warning("图片未选择"),e.abrupt("return");case 34:s=!0,e.next=22;break;case 37:e.next=43;break;case 39:e.prev=39,e.t0=e.catch(20),o=!0,c=e.t0;case 43:e.prev=43,e.prev=44,!s&&d.return&&d.return();case 46:if(e.prev=46,!o){e.next=49;break}throw c;case 49:return e.finish(46);case 50:return e.finish(43);case 51:return h={title:t,author:a,music:n,content:l},console.log(h),e.next=55,g.default.http.postSync(g.default.util.make_url("/create_and_update_section"),{data:h,class_id:this.cls_id,section_id:this.search.section_id||"",action:this.action});case 55:p=e.sent,console.log(p),g.default.util.loading(!1,"正在发送"),this.props.history.push("/sections?id="+this.cls_id+"&name="+this.cls_name);case 59:case"end":return e.stop()}},e,this,[[20,39,43,51],[44,,46,50]])}));return function(){return e.apply(this,arguments)}}()},{key:"onPreviewClick",value:function(){(0,_.default)("#phone_box").show(500)}},{key:"renderPhoneContent",value:function(){var e=[],t=10010;e.push(v.default.createElement("div",{className:"article-title",key:t++},this.state.title)),e.push(v.default.createElement("div",{className:"music-player",key:t++},v.default.createElement("div",{className:"music-header"},v.default.createElement("img",{src:k.default})),v.default.createElement("div",{className:"music-info"},v.default.createElement("div",{className:"music-title"},this.state.title),v.default.createElement("div",{className:"music-author"},this.state.author),v.default.createElement("div",{className:"music-progress"},v.default.createElement("div",{className:"timer"},"00:00"),v.default.createElement("div",{className:"progress-bar"}),v.default.createElement("div",{className:"timer"},"00:00")))));var a=!0,n=!1,l=void 0;try{for(var i,u=(0,r.default)(this.state.content);!(a=(i=u.next()).done);a=!0){var s=i.value;"text"in s?e.push(v.default.createElement("div",{className:"article-text",key:t++},s.text)):"image"in s&&e.push(v.default.createElement("div",{className:"article-image",key:t++},v.default.createElement("img",{src:s.image})))}}catch(e){n=!0,l=e}finally{try{!a&&u.return&&u.return()}finally{if(n)throw l}}return e}},{key:"onLoadedmetadata",value:function(e){console.log(e);var t=(0,_.default)("#audio_mp3")[0].duration;console.log(t);var a=this.state.music;a.duration=t,this.setState({music:a})}},{key:"onChangeAudio",value:function(e){var t=this,a=document.getElementById("audio_upload").files[0];if(console.log(a),a.size>10485760)i.default.warning("音频大小不能超过10MB");else{var n=g.default.util.get_file_suffix(a.name),l=new FileReader;l.readAsDataURL(a),l.onload=function(e){var a=e.target.result;t.setState({music:{audio:a,extension:n}}),(0,_.default)("#audio_mp3").attr("src",a)}}}},{key:"onUploadImageClick",value:function(e,t){(0,_.default)("#content-eles-"+e).find("input")[0].click()}},{key:"onChangeImage",value:function(e,t){var a=this,n=this.state.content,l=n[e],u=(0,_.default)("#content-eles-"+e).find("input")[0].files[0];if(console.log(u),u.size>1048576)i.default.warning("图片大小不能超过1MB");else{var r=g.default.util.get_file_suffix(u.name),s=new FileReader;s.readAsDataURL(u),s.onload=function(e){var t=e.target.result;l.image=t,l.extension=r,a.setState({content:n})},console.log(e)}}},{key:"addText",value:function(){var e=this.state.content;e.push({text:null}),this.setState({content:e})}},{key:"addImage",value:function(){var e=this.state.content;e.push({image:null}),this.setState({content:e})}},{key:"onTextChange",value:function(e,t){var a=this.state.content;a[e].text=t.target.value,this.setState({content:a})}},{key:"onOpClick",value:function(e,t){var a=this.state.content,n=a.length;if("up"==e&&t>0){var l=a[t-1];a[t-1]=a[t],a[t]=l}else if("down"==e&&t+1<n){var i=a[t+1];a[t+1]=a[t],a[t]=i}else"del"==e&&a.splice(t,1);this.setState({content:a})}},{key:"renderOpBtns",value:function(e){var t="op_button",a=t;return 0==e&&(t+=" disable"),e==this.state.content.length-1&&(a+=" disable"),v.default.createElement("div",null,v.default.createElement(l.default,{type:"arrow-up",className:t,onClick:this.onOpClick.bind(this,"up",e)}),v.default.createElement(l.default,{type:"arrow-down",className:a,onClick:this.onOpClick.bind(this,"down",e)}),v.default.createElement(l.default,{type:"close",className:"op_button delete",onClick:this.onOpClick.bind(this,"del",e)}))}},{key:"renderContent",value:function(){var e=[],t=0,a=(this.state.content.length,!0),i=!1,u=void 0;try{for(var s,o=(0,r.default)(this.state.content);!(a=(s=o.next()).done);a=!0){var c=s.value;"image"in c?e.push(v.default.createElement("div",{className:"content-eles",id:"content-eles-"+t,key:t,tag:"image"},v.default.createElement("div",{className:"left_btns"},v.default.createElement(n.default,{type:"primary",className:"upload_btn",onClick:this.onUploadImageClick.bind(this,t)},v.default.createElement(l.default,{type:"upload"}),"上传"),v.default.createElement("span",{className:"tip"},"图片大小不能超过1M"),v.default.createElement("input",{type:"file",onChange:this.onChangeImage.bind(this,t),style:{display:"none"}}),v.default.createElement("img",{src:c.image})),v.default.createElement("div",{className:"op_btns"},this.renderOpBtns(t)))):"text"in c&&e.push(v.default.createElement("div",{className:"content-eles",id:"content-eles-"+t,key:t,tag:"text"},v.default.createElement("div",{className:"left_btns"},"文本：",v.default.createElement("textarea",{value:c.text,onChange:this.onTextChange.bind(this,t)})),v.default.createElement("div",{className:"op_btns"},this.renderOpBtns(t)))),t++}}catch(e){i=!0,u=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw u}}return e}},{key:"onTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"onAuthorChange",value:function(e){this.setState({author:e.target.value})}},{key:"toBackClick",value:function(){var e=(0,s.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.default.util.confirmDialog("提示","返回将不保留任何信息，确定退出？");case 2:e.sent&&this.props.history.push("/sections?id="+this.cls_id+"&name="+this.cls_name);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return v.default.createElement("div",{className:"edit_html"},v.default.createElement("div",{className:"base_page_head"},v.default.createElement("span",{className:"class_name",onClick:this.toBackClick.bind(this)},v.default.createElement(l.default,{type:"rollback"}),this.cls_name),v.default.createElement(n.default,{type:"primary",onClick:this.onSubmitClick.bind(this)},"提交"),v.default.createElement(n.default,{type:"primary",onClick:this.onPreviewClick.bind(this),style:{marginLeft:20}},"手机效果预览")),v.default.createElement("div",null,"标题： ",v.default.createElement(h.default,{value:this.state.title,onChange:this.onTitleChange.bind(this),style:{width:300}})),v.default.createElement("div",{className:"cut_line"}),v.default.createElement("div",null,"作者： ",v.default.createElement(h.default,{value:this.state.author,onChange:this.onAuthorChange.bind(this),style:{width:300}})),v.default.createElement("div",{className:"cut_line"}),v.default.createElement("div",{className:"audio_box"},"音频：",v.default.createElement("input",{type:"file",id:"audio_upload",onChange:this.onChangeAudio.bind(this)}),v.default.createElement("audio",{controls:!0,id:"audio_mp3",className:"audio_play",src:this.state.music.audio,onLoadedMetadata:this.onLoadedmetadata.bind(this)},v.default.createElement("source",{type:"audio/mpeg"})),v.default.createElement("span",{className:"tip"},"音频大小不能超过10M")),v.default.createElement("div",{className:"cut_line"}),v.default.createElement("div",{className:"edit_content"},"内容：",v.default.createElement(n.default,{type:"primary",onClick:this.addImage.bind(this)},"插入图片"),v.default.createElement(n.default,{type:"primary",style:{marginLeft:20},onClick:this.addText.bind(this)},"插入文字")),this.renderContent(),v.default.createElement("div",{className:"phone_box",id:"phone_box",onClick:function(){(0,_.default)("#phone_box").hide(500)}},v.default.createElement("img",{className:"phone_bg",src:y.default}),v.default.createElement("div",{className:"phone_content"},this.renderPhoneContent())))}}]),t}(p.Component);t.default=E},720:function(e,t,a){e.exports=a.p+"imgs/phone_box.97329be2.png"},721:function(e,t,a){e.exports=a.p+"imgs/header-music.8eedb50d.png"},722:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(136)),l=_(a(137)),i=_(a(12)),u=_(a(112)),r=_(a(110)),s=_(a(111)),o=_(a(62)),c=_(a(8)),d=_(a(15)),f=_(a(7)),m=_(a(10)),h=_(a(107));a(124),a(133),a(134),a(108);var p=a(0),v=_(p),g=_(a(53));function _(e){return e&&e.__esModule?e:{default:e}}function y(e){var t="",a=!0,n=!1,l=void 0;try{for(var i,u=(0,h.default)(e);!(a=(i=u.next()).done);a=!0){var r=i.value;"text"in r&&(t+=r.text)}}catch(e){n=!0,l=e}finally{try{!a&&u.return&&u.return()}finally{if(n)throw l}}return t}a(905);var k=function(e){function t(e){(0,c.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));a.state={visible:!1,name:"",sections:[]};var n=g.default.util.get_url_params(decodeURIComponent(window.location.search));return console.log(n),a.cls_id=n.id,a.cls_name=n.name,a}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.get_sections()}},{key:"componentWillUnmount",value:function(){}},{key:"get_sections",value:function(){var e=(0,s.default)(r.default.mark(function e(){var t,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.default.http.getSync(g.default.util.make_url("/get_sections"),{class_id:this.cls_id});case 2:t=e.sent,console.log(t),(a=t.body).sort(function(e,t){return t.create_time-e.create_time}),this.setState({sections:a});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onCreateClick",value:function(){this.props.history.push("/edit_class?id="+this.cls_id+"&name="+this.cls_name)}},{key:"onModifyClick",value:function(e){this.props.history.push("/edit_class?id="+this.cls_id+"&name="+this.cls_name+"&section_id="+e+"&type=modify")}},{key:"createPost",value:function(){var e=(0,s.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.name){e.next=3;break}return u.default.warning("名字不能为空"),e.abrupt("return");case 3:return this.setState({visible:!1}),e.next=6,g.default.http.postSync(g.default.util.make_url("/create_class"),{name:this.state.name});case 6:return t=e.sent,console.log(t),e.next=10,this.get_classes();case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onNameChange",value:function(e){console.log(e.target.value),this.setState({name:e.target.value})}},{key:"render_class_list",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var l,i=(0,h.default)(this.state.sections);!(t=(l=i.next()).done);t=!0){var u=l.value,r=u._id;g.default.util.dataFormat(u.create_time);e.push(v.default.createElement("div",{className:"section",onClick:this.onModifyClick.bind(this,r),key:r},v.default.createElement("div",{className:"title"},u.title),v.default.createElement("div",{className:"sub_title"},v.default.createElement("span",null,"简介："),y(u.content))))}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e}},{key:"render",value:function(){var e=this;return v.default.createElement("div",{className:"sections_html"},v.default.createElement("div",{className:"base_page_head"},v.default.createElement("div",{className:"class_name"},this.cls_name)),v.default.createElement("div",{className:"section_list"},v.default.createElement("div",{className:"section",onClick:this.onCreateClick.bind(this)},v.default.createElement(i.default,{type:"plus",className:"add_icon"})),this.render_class_list()),v.default.createElement(n.default,{title:"创建",visible:this.state.visible,okText:"确认",cancelText:"取消",okButtonProps:{disabled:!1},onOk:function(){e.createPost()},onCancel:function(){e.setState({visible:!1})}},"套课名称：",v.default.createElement(l.default,{style:{width:300},value:this.state.name,onChange:this.onNameChange.bind(this)})))}}]),t}(p.Component);t.default=k},723:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(137)),l=y(a(38)),i=y(a(12)),u=y(a(112)),r=y(a(110)),s=y(a(111)),o=y(a(62)),c=y(a(8)),d=y(a(15)),f=y(a(7)),m=y(a(10));a(133),a(96),a(134),a(108);var h=a(0),p=y(h),v=y(a(53)),g=y(a(724)),_=y(a(135));function y(e){return e&&e.__esModule?e:{default:e}}a(911);var k=function(e){function t(e){(0,c.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.search=v.default.util.get_url_params(decodeURIComponent(window.location.search)),console.log(a.search),a.cls_id=a.search.id,a.cls_name=a.search.name,a.state={visible:!1,name:"",title:"",sub_title:"",introduction:"",background:{image:null,extension:null},rich_text:"",classes:[]},a}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.get_classes()}},{key:"componentWillUnmount",value:function(){}},{key:"get_classes",value:function(){var e=(0,s.default)(r.default.mark(function e(){var t,a,n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.http.getSync(v.default.util.make_url("/get_classes"),{class_id:this.cls_id});case 2:return t=e.sent,console.log(t),a=t.body,e.next=7,v.default.util.toDataUrl(a.background.image);case 7:n=e.sent,this.setState({name:a.name,title:a.title,sub_title:a.sub_title,background:{image:n,extension:a.background.extension}}),this.refs.rich_editer.setHtml(a.introduction);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toBackClick",value:function(){var e=(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.util.confirmDialog("提示","返回将不保留任何信息，确定退出？");case 2:e.sent&&this.props.history.push("/home");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onNameChange",value:function(e){console.log(e.target.value),this.setState({name:e.target.value})}},{key:"onCreateClick",value:function(){var e=(0,s.default)(r.default.mark(function e(){var t,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.title){e.next=3;break}return u.default.warning("主标题不能为空"),e.abrupt("return");case 3:if(this.state.sub_title){e.next=6;break}return u.default.warning("副标题不能为空"),e.abrupt("return");case 6:if(this.state.background.extension){e.next=9;break}return u.default.warning("背景图片不能为空"),e.abrupt("return");case 9:if(t=this.refs.rich_editer.getHtml()){e.next=13;break}return u.default.warning("课程简介不能为空"),e.abrupt("return");case 13:return e.next=15,v.default.http.postSync(v.default.util.make_url("/create_class"),{data:{title:this.state.title,sub_title:this.state.sub_title,background:this.state.background,introduction:t},class_id:this.cls_id,action:this.cls_id?"modify":"create"});case 15:a=e.sent,console.log(a),this.props.history.push("/home");case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onTitleChange",value:function(e,t){"title"==e?this.setState({title:t.target.value}):"sub_title"==e&&this.setState({sub_title:t.target.value})}},{key:"onUploadImageClick",value:function(){(0,_.default)("#main_input").click()}},{key:"onChangeImage",value:function(){var e=this,t=(this.state.background,(0,_.default)("#main_input")[0].files[0]);if(t.size>1048576)u.default.warning("图片大小不能超过1MB");else{var a=v.default.util.get_file_suffix(t.name),n=new FileReader;n.readAsDataURL(t),n.onload=function(t){var n=t.target.result,l={};l.image=n,l.extension=a,e.setState({background:l})}}}},{key:"onTextChange",value:function(e){this.setState({introduction:e.target.value})}},{key:"render",value:function(){var e=this;return p.default.createElement("div",{className:"create_class_html"},p.default.createElement("div",{className:"base_page_head"},p.default.createElement("span",{className:"to_back",onClick:this.toBackClick.bind(this)},p.default.createElement(i.default,{type:"rollback"}),this.cls_name),p.default.createElement(l.default,{type:"primary",onClick:this.onCreateClick.bind(this)},"提交")),p.default.createElement("div",null,"主标题： ",p.default.createElement(n.default,{value:this.state.title,onChange:this.onTitleChange.bind(this,"title"),style:{width:300}})),p.default.createElement("div",{className:"cut_line"}),p.default.createElement("div",null,"副标题： ",p.default.createElement(n.default,{value:this.state.sub_title,onChange:this.onTitleChange.bind(this,"sub_title"),style:{width:300}})),p.default.createElement("div",{className:"cut_line"}),p.default.createElement("div",{className:"main_background"},p.default.createElement(l.default,{type:"primary",className:"upload_btn",onClick:this.onUploadImageClick.bind(this)},p.default.createElement(i.default,{type:"upload"}),"上传背景图片"),p.default.createElement("span",{className:"tip"},"图片大小不能超过1M"),p.default.createElement("input",{type:"file",id:"main_input",onChange:this.onChangeImage.bind(this),style:{display:"none"}}),p.default.createElement("img",{src:this.state.background.image})),p.default.createElement("div",{className:"cut_line"}),p.default.createElement("div",{className:"introduction",id:"introduction"},p.default.createElement("div",{className:"title_in"},"课程简介"),p.default.createElement("textarea",{style:{display:"none"},value:this.state.introduction,onChange:this.onTextChange.bind(this)}),p.default.createElement(g.default,{ref:"rich_editer"})),p.default.createElement("div",{className:"richEdit"}),p.default.createElement(l.default,{onClick:function(){var t=e.refs.rich_editer.getHtml();console.log(t),e.setState({rich_text:t})}},"测试"),p.default.createElement("div",null,p.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.rich_text},className:"context_panel"})))}}]),t}(h.Component);t.default=k},724:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(62)),l=f(a(8)),i=f(a(15)),u=f(a(7)),r=f(a(10)),s=f(a(333));a(334);var o=a(0),c=f(o),d=f(a(725));a(172),f(a(53)),f(a(135));function f(e){return e&&e.__esModule?e:{default:e}}a(909);s.default.Header,s.default.Sider,s.default.Content;var m=function(e){function t(e){(0,l.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={},a}return(0,r.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.initEditor()}},{key:"getHtml",value:function(){return this.editor.txt.html()}},{key:"setHtml",value:function(e){this.editor.txt.html(e)}},{key:"initEditor",value:function(){var e=this.refs.editorElem,t=new d.default(e);this.editor=t,console.log(this.editor),t.create()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{className:"rich_editer_html",ref:"editorElem"})}}]),t}(o.Component);t.default=m},726:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(62)),l=d(a(8)),i=d(a(15)),u=d(a(7)),r=d(a(10)),s=a(0),o=d(s),c=(d(a(53)),d(a(135)));function d(e){return e&&e.__esModule?e:{default:e}}a(913);var f=function(e){function t(){(0,l.default)(this,t);var e=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this));return e.state={visible:!1,svg_code:""},e}return(0,r.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"onSVGCODEChange",value:function(e){console.log(e.target.value);var t=e.target.value,a=e.target.value,n="",l="";""!=a&&(l="data:image/svg+xml,"+(a=(a=(a=(a=a.replace(/</g,"%3C")).replace(/>/g,"%3E")).replace(/\"/g,"'")).replace(/#/g,"%23")),n='background-image: url("data:image/svg+xml,'+a+'");'),this.setState({svg_code:t,css_code:n}),(0,c.default)("#show_icon").css("background-image",'url("'+l+'")')}},{key:"render",value:function(){return o.default.createElement("div",{id:"svg_wcss_html"},o.default.createElement("textarea",{class:"svg_code",placeholder:"请输入svg 代码",value:this.state.svg_code,onChange:this.onSVGCODEChange.bind(this)}),o.default.createElement("div",{className:"cut_line"}),o.default.createElement("textarea",{class:"css_code",value:this.state.css_code}),o.default.createElement("div",{className:"cut_line"}),o.default.createElement("div",{className:"show_icon",id:"show_icon"}))}}]),t}(s.Component);t.default=f},727:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(735)),l=y(a(12)),i=y(a(110)),u=y(a(111)),r=y(a(107)),s=y(a(62)),o=y(a(8)),c=y(a(15)),d=y(a(7)),f=y(a(10)),m=y(a(333));a(736),a(134),a(334);var h=a(0),p=y(h),v=a(172),g=y(a(53)),_=y(a(135));function y(e){return e&&e.__esModule?e:{default:e}}a(919);var k=m.default.Header,b=m.default.Sider,E=m.default.Content,x=[{key:"0",route:"/home",icon:"windows",name:"首页"},{key:"1",route:"/svg_scss",icon:"code",name:"SVGSCSS"}],w=function(e){function t(e){(0,o.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return console.log(window.location),a.state={collapsed:!1,selectKey:"0",head_width:(0,_.default)(window).width()-200},a}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.location.pathname,a=!0,n=!1,l=void 0;try{for(var i,u=(0,r.default)(x);!(a=(i=u.next()).done);a=!0){var s=i.value;if(console.log(s,t),t==s.route){this.setState({selectKey:s.key});break}}}catch(e){n=!0,l=e}finally{try{!a&&u.return&&u.return()}finally{if(n)throw l}}(0,_.default)(window).resize(function(){e.setState({head_width:(0,_.default)(window).width-200})})}},{key:"componentWillUnmount",value:function(){}},{key:"onMenuItemClick",value:function(e){e.item;var t=e.key;e.keyPath,e.domEvent;console.log(t),this.setState({selectKey:t})}},{key:"toggle",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"onLogoutClick",value:function(){var e=(0,u.default)(i.default.mark(function e(){var t,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.default.cookies.get_cookies(),console.log(t),t){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,g.default.util.confirmDialog("提示","确定退出？");case 6:if(!e.sent){e.next=15;break}return console.log("退出"),e.next=11,g.default.http.postSync(g.default.util.make_url("/logout"),{username:t.username});case 11:a=e.sent,console.log(a),g.default.cookies.del_cookies(),window.location.href="/login";case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return p.default.createElement("div",{className:"base_page_html"},p.default.createElement(m.default,null,p.default.createElement(b,{trigger:null,collapsible:!0,collapsed:this.state.collapsed,width:"200"},p.default.createElement("div",{className:"base_page_logo"}),p.default.createElement(n.default,{theme:"dark",mode:"inline",defaultSelectedKeys:[this.state.selectKey],onSelect:this.onMenuItemClick.bind(this),selectedKeys:[this.state.selectKey]},x.map(function(e){return p.default.createElement(n.default.Item,{key:e.key},p.default.createElement(v.Link,{to:e.route},p.default.createElement(l.default,{type:e.icon}),e.name))}))),p.default.createElement(m.default,null,p.default.createElement(k,{style:{background:"#fff",padding:0,position:"fixed",zIndex:1,width:this.state.head_width,marginLeft:0,borderBottom:"1px solid #aaa"}},p.default.createElement(l.default,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle.bind(this),style:{marginLeft:20}}),p.default.createElement("div",{className:"logout_button",id:"logout_button",onClick:this.onLogoutClick.bind(this)},p.default.createElement(l.default,{type:"logout",className:"icon"}),"退出")),p.default.createElement(E,{style:{margin:"90px 15px 30px",padding:24,background:"#fff",Height:800,minHeight:700}},this.props.children))))}}]),t}(h.Component);t.default=w},893:function(e,t){},897:function(e,t){},901:function(e,t){},903:function(e,t){},905:function(e,t){},909:function(e,t){},911:function(e,t){},913:function(e,t){},919:function(e,t){}});